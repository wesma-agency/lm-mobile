/* spritespin */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.SpriteSpin={})}(this,function(e){"use strict";function t(e){var t=Te.prototype;for(var n in e)if(e.hasOwnProperty(n)){if(t[n])throw new Error("API method is already defined: "+n);t[n]=e[n]}return t}function n(e){var t=e.touches,n=e;return void 0===e.touches&&void 0!==e.originalEvent&&(t=e.originalEvent.touches),void 0!==t&&t.length>0&&(n=t[0]),{x:n.clientX||0,y:n.clientY||0}}function a(){return Fe?Fe:(Me||(Me=document.createElement("canvas")),Me&&Me.getContext?Fe=Me.getContext("2d"):null)}function r(e,t,n){if(!a())return!1;if(1048576>=t*n)return!1;Me.width=Me.height=1,Fe.fillStyle="#FF00FF",Fe.fillRect(0,0,1,1),Fe.drawImage(e,-t+1,0);try{var r=Fe.getImageData(0,0,1,1).data;return 255===r[0]&&0===r[1]&&255===r[2]}catch(i){return!1}}function i(e){var t=Math.floor(e.width||e.frameWidth||e.target.innerWidth()),n=Math.floor(e.height||e.frameHeight||e.target.innerHeight());return{aspect:t/n,height:n,width:t}}function o(e){var t=i(e);if("function"!=typeof window.getComputedStyle)return t;var n=window.getComputedStyle(e.target[0]);return n.width?(t.width=Math.floor(Number(n.width.replace("px",""))),t.height=Math.floor(t.width/t.aspect),t):t}function s(e){var t=Math.floor(e.frameWidth||e.width||e.target.innerWidth()),n=Math.floor(e.frameHeight||e.height||e.target.innerHeight());return{aspect:t/n,height:n,width:t}}function u(e,t,n){var a="fit"===e,r="fill"===e,i="stretch"===e,o={width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute",overflow:"hidden"};if(!e||i)return o;var s=t.aspect>=n.aspect,u=t.width,l=t.height;return(a&&s||r&&!s)&&(u=n.width,l=n.width/t.aspect),(r&&s||a&&!s)&&(l=n.height,u=n.height*t.aspect),u=Math.floor(u),l=Math.floor(l),o.width=u,o.height=l,o.top=Math.floor((n.height-l)/2),o.left=Math.floor((n.width-u)/2),o.right=o.left,o.bottom=o.top,o}function l(e){return e.naturalWidth?{height:e.naturalHeight,width:e.naturalWidth}:(Se=Se||new Image,Se.crossOrigin=e.crossOrigin,Se.src=e.src,{height:Se.height,width:Se.width})}function c(e,t){return 1===e.length?[d(e[0],t)]:t.framesX&&t.framesY?m(e,t):f(e,t)}function d(e,t){var n={id:0,sprites:[]};g(e,t,n);for(var a=t.frames,r=Number(t.framesX)||a,i=Math.ceil(a/r),o=Math.floor(n.width/r),s=Math.floor(n.height/i),u=n.isSubsampled?2:1,l=0;a>l;l++){var c=l%r*o,d=Math.floor(l/r)*s;n.sprites.push({id:l,x:c,y:d,width:o,height:s,sampledX:c/u,sampledY:d/u,sampledWidth:o/u,sampledHeight:s/u})}return n}function f(e,t){for(var n=[],a=0;a<e.length;a++){var r=d(e[a],{frames:1,framesX:1,detectSubsampling:t.detectSubsampling});r.id=a,n.push(r)}return n}function m(e,t){for(var n=[],a=0;a<e.length;a++){var r=d(e[a],{frames:void 0,framesX:t.framesX,framesY:t.framesY,detectSubsampling:t.detectSubsampling});r.id=a,n.push(r)}return n}function g(e,t,n){var a=l(e);return n.isSubsampled=t.detectSubsampling&&r(e,a.width,a.height),n.width=a.width,n.height=a.height,n.sampledWidth=a.width/(n.isSubsampled?2:1),n.sampledHeight=a.height/(n.isSubsampled?2:1),n}function h(e,t,n,a){for(var r=a*t+n,i=0,o=null,s=null;;){if(s=e[i],!s)break;if(!(r>=s.sprites.length)){o=s.sprites[r];break}r-=s.sprites.length,i++}return{sprite:o,sheet:s}}function p(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return n}function v(){}function w(e){var t,n=e.source;t="string"==typeof n?[n]:n;for(var a=[],r=e.preloadCount||t.length,i=e.initiated||v,o=e.progress||v,s=e.complete||v,u=0,l=!1,c=!1,d=function(){u+=1,o({index:p(this,a),loaded:u,total:t.length,percent:Math.round(u/t.length*100)}),c=c||this===a[0],c&&!l&&u>=r&&(l=!0,s(a))},f=0,m=t;f<m.length;f++){var g=m[f],h=new Image;a.push(h),h.crossOrigin=e.crossOrigin,h.onload=h.onabort=h.onerror=d,h.src=g}i(a)}function b(e,t,n){for(var a=String(e);a.length<t;)a=String(n)+a;return a}function x(e,t){var n=t.digits||2,a=t.lanePlacer||"{lane}",r=t.framePlacer||"{frame}",i=0,o=0;t.frame&&(i=t.frame[0],o=t.frame[1]);var s=0,u=0;t.lane&&(s=t.lane[0],u=t.lane[1]);for(var l=[],c=s;u>=c;c+=1)for(var d=i;o>=d;d+=1)l.push(e.replace(a,b(c,n,"0")).replace(r,b(d,n,"0")));return l}function y(){}function k(e){return console&&console[e]?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,e)}:y}function X(e){return Array.isArray(e)?e:[e]}function M(e,t,n){return e>n?n:t>e?t:e}function F(e,t,n,a){for(;e>n;)e-=a;for(;t>e;)e+=a;return e}function S(e){return e.preventDefault(),!1}function T(e,t,n){n&&e.bind(t+"."+ze,function(t){n.apply(e,[t,e.spritespin("data")])})}function Y(e){e.unbind("."+ze)}function z(e){return"function"==typeof e}function C(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}function P(e){e.target.attr("unselectable","on").css({width:"",height:"","-ms-user-select":"none","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"});var t=e.responsive?o(e):i(e),n=u(e.sizeMode,s(e),t);e.target.css({width:t.width,height:t.height,position:"relative",overflow:"hidden"}),e.stage.css(n).hide(),e.canvas&&(e.canvas.css(n).hide(),e.canvasRatio=e.canvasRatio||C(e.context),"number"==typeof n.width&&"number"==typeof n.height?(e.canvas[0].width=n.width*e.canvasRatio||t.width,e.canvas[0].height=n.height*e.canvasRatio||t.height):(e.canvas[0].width=t.width*e.canvasRatio,e.canvas[0].height=t.height*e.canvasRatio),e.context.scale(e.canvasRatio,e.canvasRatio))}function R(e,t){return e.state=e.state||{},e.state[t]=e.state[t]||{},e.state[t]}function A(e,t){var n=R(e,"plugin");return n[t]=n[t]||{},n[t]}function E(e,t){return!!R(e,"flags")[t]}function W(e,t,n){R(e,"flags")[t]=!!n}function D(e){return R(e,"playback")}function I(e,t){e.lane=e.wrapLane?F(t,0,e.lanes-1,e.lanes):M(t,0,e.lanes-1)}function H(e){e.frame+=e.reverse?-1:1,e.frame=F(e.frame,0,e.frames-1,e.frames),e.loop||e.frame!==e.stopFrame||U(e)}function L(e,t){e.frame=Number(t),e.frame=e.wrap?F(e.frame,0,e.frames-1,e.frames):M(e.frame,0,e.frames-1)}function O(e){var t=D(e);t.handler&&(q(e),H(e),B(e))}function q(e){var t=D(e);t.lastFrame=e.frame,t.lastLane=e.lane}function B(e){var t=D(e);(t.lastFrame!==e.frame||t.lastLane!==e.lane)&&e.target.trigger("onFrameChanged."+ze,e),e.target.trigger("onFrame."+ze,e),e.target.trigger("onDraw."+ze,e)}function N(e,t,n){q(e),null!=t&&L(e,t),null!=n&&I(e,n),B(e)}function U(e){e.animate=!1;var t=D(e);null!=t.handler&&(window.clearInterval(t.handler),t.handler=null)}function j(e){var t=D(e);!t.handler||e.animate&&t.frameTime===e.frameTime||U(e),e.animate&&!t.handler&&(t.frameTime=e.frameTime,t.handler=window.setInterval(function(){return O(e)},t.frameTime))}function _(e){e.animate=!0,j(e)}function Q(e,t){return Ie[e]?void De('Plugin name "'+e+'" is already taken'):(t=t||{},Ie[e]=t,t)}function Z(e,t){We('"registerModule" is deprecated, use "registerPlugin" instead'),Q(e,t)}function G(e){return Ie[e]}function J(e){K(e);for(var t=0;t<e.plugins.length;t+=1){var n=e.plugins[t];if("string"==typeof n){var a=G(n);a?e.plugins[t]=a:De("No plugin found with name "+n)}}}function K(e){e.mods&&(We('"mods" option is deprecated, use "plugins" instead'),e.plugins=e.mods,delete e.mods),e.behavior&&(We('"behavior" option is deprecated, use "plugins" instead'),e.plugins.push(e.behavior),delete e.behavior),e.module&&(We('"module" option is deprecated, use "plugins" instead'),e.plugins.push(e.module),delete e.module)}function V(e){Le+=1,e.id=String(Le),Oe[e.id]=e}function ee(e){delete Oe[e.id]}function te(e){for(var t in Oe)Oe.hasOwnProperty(t)&&e(Oe[t])}function ne(e){var t=e.target;Y(t);for(var n=0,a=Re;n<a.length;n++){var r=a[n];T(t,r,S)}for(var i=0,o=e.plugins;i<o.length;i++){for(var s=o[i],u=0,l=Ce;u<l.length;u++){var r=l[u];T(t,r,s[r])}for(var c=0,d=Pe;c<d.length;c++){var r=d[c];T(t,r,s[r])}}T(t,"onLoad",function(e,t){j(t)});for(var f=0,m=Pe;f<m.length;f++){var r=m[f];T(t,r,e[r])}}function ae(e){e.images||(e.metrics=[]),e.metrics=c(e.images,e);var t=h(e.metrics,e.frames,0,0);t.sprite&&(e.frameWidth=t.sprite.width,e.frameHeight=t.sprite.height)}function re(e){J(e),ne(e),P(e),e.source=X(e.source),e.loading=!0,e.target.addClass("loading").trigger("onInit."+ze,e),w({source:e.source,crossOrigin:e.crossOrigin,preloadCount:e.preloadCount,progress:function(t){e.progress=t,e.target.trigger("onProgress."+ze,e)},complete:function(t){e.images=t,e.loading=!1,e.frames=e.frames||t.length,ae(e),P(e),e.stage.show(),e.target.removeClass("loading").trigger("onLoad."+ze,e).trigger("onFrame."+ze,e).trigger("onDraw."+ze,e).trigger("onComplete."+ze,e)}})}function ie(e){var t=this,n=e.target,a=He.extend(!0,{},Ae,e);if(a.source=a.source||[],a.plugins=a.plugins||["360","drag"],n.find("img").each(function(){Array.isArray(a.source)||(a.source=[]),a.source.push(He(t).attr("src"))}),n.empty().addClass("spritespin-instance").append("<div class='spritespin-stage'></div>"),"canvas"===a.renderer){var r=document.createElement("canvas");r.getContext&&r.getContext("2d")?(a.canvas=He(r).addClass("spritespin-canvas"),a.context=r.getContext("2d"),n.append(a.canvas),n.addClass("with-canvas")):a.renderer="image"}return a.target=n,a.stage=n.find(".spritespin-stage"),n.data(ze,a),V(a),a}function oe(e){qe();var t=e.target.data(ze);return t?He.extend(t,e):t=ie(e),re(t),t}function se(e){ee(e),U(e),e.target.trigger("onDestroy",e).html(null).attr("style",null).attr("unselectable",null).removeClass(["spritespin-instance","with-canvas"]),Y(e.target),e.target.removeData(ze)}function ue(e){return R(e,"input")}function le(e,t){var a=n(e),r=ue(t);r.oldX=r.currentX,r.oldY=r.currentY,r.currentX=a.x,r.currentY=a.y,(void 0===r.oldX||void 0===r.oldY)&&(r.oldX=r.currentX,r.oldY=r.currentY),(void 0===r.startX||void 0===r.startY)&&(r.startX=r.currentX,r.startY=r.currentY,r.clickframe=t.frame,r.clicklane=t.lane),r.dX=r.currentX-r.startX,r.dY=r.currentY-r.startY,r.ddX=r.currentX-r.oldX,r.ddY=r.currentY-r.oldY,r.ndX=r.dX/t.target.innerWidth(),r.ndY=r.dY/t.target.innerHeight(),r.nddX=r.ddX/t.target.innerWidth(),r.nddY=r.ddY/t.target.innerHeight()}function ce(e){var t=ue(e);t.startX=t.startY=void 0,t.currentX=t.currentY=void 0,t.oldX=t.oldY=void 0,t.dX=t.dY=0,t.ddX=t.ddY=0,t.ndX=t.ndY=0,t.nddX=t.nddY=0}function de(e,t){var n=Ye(this);if("data"===e)return n.data(ze);if("api"===e){var a=n.data(ze);return a.api=a.api||new Te(a),a.api}if("destroy"===e)return n.each(function(){var e=n.data(ze);e&&se(e)});if(2===arguments.length&&"string"==typeof e&&(r={},r[e]=t,e=r),"object"==typeof e)return oe(Ye.extend(!0,{target:n},e)).target;throw new Error("Invalid call to spritespin");var r}function fe(e,t){for(var n=0,a=t;n<a.length;n++){var r=a[n];if(e[r]||r in e)return r}return t[0]}function me(){Ye(document).unbind(Ne)}function ge(e){me(),Ye(document).bind(Ne,e)}function he(){Ye(window).unbind(Ue)}function pe(e){he(),Ye(window).bind(Ue,e)}function ve(e){e=e||document.documentElement,e[Be.requestFullscreen]()}function we(){return document[Be.exitFullscreen]()}function be(){return document[Be.fullscreenEnabled]}function xe(){return document[Be.fullscreenElement]}function ye(){return!!xe()}function ke(e,t){ye()?this.apiRequestFullscreen(t):this.exitFullscreen()}function Xe(e,t){t=t||{};var n=e.width,a=e.height,r=e.source,i=e.sizeMode,o=e.responsive,s=function(){e.width=window.screen.width,e.height=window.screen.height,e.source=t.source||r,e.sizeMode=t.sizeMode||"fit",e.responsive=!1,re(e)},u=function(){e.width=n,e.height=a,e.source=r,e.sizeMode=i,e.responsive=o,re(e)};ge(function(){ye()?(s(),pe(s)):(me(),he(),u())}),ve(e.target[0])}var Me,Fe,Se,Te=function(){function e(e){this.data=e}return e}(),Ye=window.jQuery||window.$,ze="spritespin",Ce=["mousedown","mousemove","mouseup","mouseenter","mouseover","mouseleave","mousewheel","wheel","click","dblclick","touchstart","touchmove","touchend","touchcancel","selectstart","gesturestart","gesturechange","gestureend"],Pe=["onInit","onProgress","onLoad","onFrameChanged","onFrame","onDraw","onComplete","onDestroy"],Re=["dragstart"],Ae={source:void 0,width:void 0,height:void 0,frames:void 0,framesX:void 0,lanes:1,sizeMode:void 0,renderer:"canvas",lane:0,frame:0,frameTime:40,animate:!0,retainAnimate:!1,reverse:!1,loop:!0,stopFrame:0,wrap:!0,wrapLane:!1,sense:1,senseLane:void 0,orientation:"horizontal",detectSubsampling:!0,preloadCount:void 0,touchScrollTimer:[200,1500],responsive:void 0,plugins:void 0},Ee=k("log"),We=k("warn"),De=k("error"),Ie={},He=Ye,Le=0,Oe={},qe=function(){function e(e,t){te(function(n){for(var a=0,r=n.plugins;a<r.length;a++){var i=r[a];"function"==typeof i[e]&&i[e].apply(n.target,[t,n])}})}function t(){te(function(e){e.responsive&&re(e)})}qe=function(){};for(var n=function(t){He(window.document).bind(t+"."+ze,function(n){e("document"+t,n)})},a=0,r=Ce;a<r.length;a++){var i=r[a];n(i)}var o=null;He(window).on("resize",function(){window.clearTimeout(o),o=window.setTimeout(t,100)})};Ye.fn[ze]=de,t({isPlaying:function(){return null!=D(this.data).handler},isLooping:function(){return this.data.loop},toggleAnimation:function(){this.isPlaying()?this.stopAnimation():this.startAnimation()},stopAnimation:function(){this.data.animate=!1,U(this.data)},startAnimation:function(){this.data.animate=!0,j(this.data)},loop:function(e){return this.data.loop=e,j(this.data),this},currentFrame:function(){return this.data.frame},updateFrame:function(e){return N(this.data,e),this},skipFrames:function(e){var t=this.data;return N(t,t.frame+(t.reverse?-e:+e)),this},nextFrame:function(){return this.skipFrames(1)},prevFrame:function(){return this.skipFrames(-1)},playTo:function(e,t){var n=this.data;if(t=t||{},t.force||n.frame!==e){if(t.nearest){var a=e-n.frame,r=e>n.frame?a-n.frames:a+n.frames,i=Math.abs(a)<Math.abs(r)?a:r;n.reverse=0>i}return n.animate=!0,n.loop=!1,n.stopFrame=e,j(n),this}}});var Be={requestFullscreen:fe(document.documentElement,["requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"]),exitFullscreen:fe(document,["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"]),fullscreenElement:fe(document,["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"]),fullscreenEnabled:fe(document,["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"]),fullscreenchange:fe(document,["onfullscreenchange","onwebkitfullscreenchange","onmozfullscreenchange","onMSFullscreenChange"]).replace(/^on/,""),fullscreenerror:fe(document,["onfullscreenerror","onwebkitfullscreenerror","onmozfullscreenerror","onMSFullscreenError"]).replace(/^on/,"")},Ne=Be.fullscreenchange+"."+ze+"-fullscreen",Ue="orientationchange."+ze+"-fullscreen";t({fullscreenEnabled:be,fullscreenElement:xe,exitFullscreen:we,toggleFullscreen:function(e){ke(this.data,e)},requestFullscreen:function(e){Xe(this.data,e)}}),function(){function e(e,t){if(!t.loading&&t.stage.is(":visible")){le(e,t);var n,a,r=ue(t),i=t.target,o=i.offset();"horizontal"===t.orientation?(n=i.innerWidth()/2,a=r.currentX-o.left):(n=i.innerHeight()/2,a=r.currentY-o.top),N(t,t.frame+(a>n?1:-1))}}var t="click";Q(t,{name:t,mouseup:e,touchend:e})}(),function(){function e(e){return A(e,s)}function t(e){return"number"==typeof e.orientation?e.orientation*Math.PI/180:"horizontal"===e.orientation?0:Math.PI/2}function n(t,n){var a=e(n),r=[200,1500],i=n.touchScrollTimer||r;a.minTime=i[0]||r[0],a.maxTime=i[1]||r[1]}function a(t,n){var a=e(n);if(!(n.loading||E(n,"dragging")||n.zoomPinFrame&&!n.stage.is(":visible"))){var r=(new Date).getTime();a.endAt&&r-a.endAt>a.maxTime&&(a.startAt=null,a.endAt=null),a.startAt&&r-a.startAt>a.minTime&&t.preventDefault(),a.startAt=r,a.wasPlaying=!!D(n).handler,a.frame=n.frame||0,a.lane=n.lane||0,W(n,"dragging",!0),le(t,n)}}function r(t,n){E(n,"dragging")&&(e(n).endAt=(new Date).getTime(),W(n,"dragging",!1),ce(n),n.retainAnimate&&e(n).wasPlaying&&_(n))}function i(n,a){var r=e(a),i=ue(a);if(E(a,"dragging")){le(n,a);var o=t(a),s=Math.sin(o),u=Math.cos(o),l=(i.nddX*u-i.nddY*s)*a.sense||0,c=(i.nddX*s+i.nddY*u)*(a.senseLane||a.sense)||0;r.frame+=a.frames*l,r.lane+=a.lanes*c;a.frame,a.lane;N(a,Math.floor(r.frame),Math.floor(r.lane)),U(a)}}function o(e,t){a(e,t),i(e,t)}var s="drag";Q("drag",{name:"drag",onInit:n,mousedown:a,mousemove:i,mouseup:r,documentmousemove:i,documentmouseup:r,touchstart:a,touchmove:i,touchend:r,touchcancel:r}),Q("move",{name:"move",onInit:n,mousemove:o,mouseleave:r,touchstart:a,touchmove:i,touchend:r,touchcancel:r})}(),function(){function e(e){return A(e,s)}function t(t){var n=e(t);n.frameTime=t.frameTime,n.animate=t.animate,n.reverse=t.reverse}function n(t){var n=e(t);t.frameTime=n.frameTime,t.animate=n.animate,t.reverse=n.reverse}function a(e,n){E(n,"loading")||E(n,"dragging")||!n.stage.is(":visible")||(t(n),le(e,n),W(n,"dragging",!0),n.animate=!0,j(n))}function r(e,t){W(t,"dragging",!1),ce(t),U(t),n(t),j(t)}function i(e,t){if(E(t,"dragging")){le(e,t);var n,a,r=ue(t),i=t.target,o=i.offset();"horizontal"===t.orientation?(n=i.innerWidth()/2,a=(r.currentX-o.left-n)/n):(n=t.height/2,a=(r.currentY-o.top-n)/n),t.reverse=0>a,a=0>a?-a:a,t.frameTime=80*(1-a)+20,("horizontal"===t.orientation&&r.dX<r.dY||"vertical"===t.orientation&&r.dX<r.dY)&&e.preventDefault()}}function o(e,t){t.animate=!0,j(t)}var s="hold";Q(s,{name:s,mousedown:a,mousemove:i,mouseup:r,mouseleave:r,touchstart:a,touchmove:i,touchend:r,touchcancel:r,onFrame:o})}(),function(){function e(e){return A(e,o)}function t(e,t,n){return e[t]||n}function n(n,a){var r=e(a);r.fling=t(a,"swipeFling",10),r.snap=t(a,"swipeSnap",.5)}function a(e,t){t.loading||E(t,"dragging")||(le(e,t),W(t,"dragging",!0))}function r(e,t){if(E(t,"dragging")){le(e,t);var n=t.frame,a=t.lane;N(t,n,a)}}function i(t,n){if(E(n,"dragging")){W(n,"dragging",!1);var a,r,i=e(n),o=ue(n),s=n.frame,u=n.lane,l=i.snap,c=i.fling;"horizontal"===n.orientation?(a=o.ndX,r=o.ddX):(a=o.ndY,r=o.ddY),a>=l||r>=c?s=n.frame-1:(-l>=a||-c>=r)&&(s=n.frame+1),ce(n),N(n,s,u),U(n)}}var o="swipe";Q(o,{name:o,onLoad:n,mousedown:a,mousemove:r,mouseup:i,mouseleave:i,touchstart:a,touchmove:r,touchend:i,touchcancel:i})}(),function(){function e(e,t){if(!t.loading&&t.stage.is(":visible")){e.preventDefault();var n=e.originalEvent,a=0===n.deltaX?0:n.deltaX>0?1:-1,r=0===n.deltaY?0:n.deltaY>0?1:-1;N(t,t.frame+r,t.lane+a)}}var t="wheel";Q(t,{name:t,wheel:e})}(),function(){function e(e){return A(e,o)}function t(t,n){var a=e(n);a.stage||(a.stage=Ye(i),a.stage.appendTo(n.target)),a.stage.find(".spritespin-progress-label").text("0%").css({"text-align":"center"}),a.stage.find(".spritespin-progress-bar").css({width:"0%"}),a.stage.hide().fadeIn()}function n(t,n){var a=e(n);a.stage.find(".spritespin-progress-label").text(n.progress.percent+"%").css({"text-align":"center"}),a.stage.find(".spritespin-progress-bar").css({width:n.progress.percent+"%"})}function a(t,n){Ye(e(n).stage).fadeOut()}function r(t,n){Ye(e(n).stage).remove()}var i="\n<div class='spritespin-progress'>\n  <div class='spritespin-progress-label'></div>\n  <div class='spritespin-progress-bar'></div>\n</div>\n",o="progress";Q(o,{name:o,onInit:t,onProgress:n,onLoad:a,onDestroy:r})}(),function(){function e(e,t){t.stage.find(".spritespin-frames").detach(),"image"===t.renderer&&$(t.images).addClass("spritespin-frames").appendTo(t.stage)}function t(e,t){var n=h(t.metrics,t.frames,t.frame,t.lane),a=n.sheet,r=n.sprite;if(a&&r){var i=t.source[a.id],o=t.images[a.id];if("canvas"===t.renderer){t.canvas.show();var s=t.canvas[0].width/t.canvasRatio,u=t.canvas[0].height/t.canvasRatio;return t.context.clearRect(0,0,s,u),void t.context.drawImage(o,r.sampledX,r.sampledY,r.sampledWidth,r.sampledHeight,0,0,s,u)}var l=t.stage.innerWidth()/r.sampledWidth,c=t.stage.innerHeight()/r.sampledHeight,d=Math.floor(-r.sampledY*c),f=Math.floor(-r.sampledX*l),m=Math.floor(a.sampledWidth*l),g=Math.floor(a.sampledHeight*c);if("background"===t.renderer)return void t.stage.css({"background-image":"url('"+i+"')","background-position":f+"px "+d+"px","background-repeat":"no-repeat","-webkit-background-size":m+"px "+g+"px","-moz-background-size":m+"px "+g+"px","-o-background-size":m+"px "+g+"px","background-size":m+"px "+g+"px"});$(t.images).hide(),$(o).show().css({position:"absolute",top:d,left:f,"max-width":"initial",width:m,height:g})}}var n="360";Q(n,{name:n,onLoad:e,onDraw:t})}(),function(){function e(e){return A(e,v)}function t(e,t,n){return e[t]||n}function n(n,a){var r=e(a);r.canvas=r.canvas||Ye("<canvas class='blur-layer'></canvas>"),r.context=r.context||r.canvas[0].getContext("2d"),r.steps=r.steps||[],r.fadeTime=Math.max(t(a,"blurFadeTime",200),1),r.frameTime=Math.max(t(a,"blurFrameTime",a.frameTime),16),r.trackTime=null,r.cssBlur=!!t(a,"blurCss",!1);var l=s(a),c=a.responsive?o(a):i(a),d=u(a.sizeMode,l,c);r.canvas[0].width=a.width*a.canvasRatio,r.canvas[0].height=a.height*a.canvasRatio,r.canvas.css(d).show(),r.context.scale(a.canvasRatio,a.canvasRatio),a.target.append(r.canvas)}function a(t,n){var a=e(n);r(n),null==a.timeout&&c(n)}function r(t){var n=e(t),a=D(t),r=Math.abs(t.frame-a.lastFrame);r=r>=t.frames/2?t.frames-r:r,n.steps.unshift({frame:t.frame,lane:t.lane,live:1,step:n.frameTime/n.fadeTime,d:r,alpha:0})}function l(e){w.length=0;for(var t=0;t<e.length;t+=1)e[t].alpha<=0&&w.push(t);for(var n=0,a=w;n<a.length;n++){var r=a[n];e.splice(r,1)}}function c(t){var n=e(t);n.timeout=window.setTimeout(function(){p(t)},n.frameTime)}function d(t){var n=e(t);window.clearTimeout(n.timeout),n.timeout=null}function f(e,t){var n=Math.min(Math.max(t/2-4,0),2.5),a="blur("+n+"px)";e.css({"-webkit-filter":a,filter:a})}function m(e,t){t.canvas.show();t.canvas[0].width/e.canvasRatio,t.canvas[0].height/e.canvasRatio}function g(e,t,n){if(!(n.alpha<=0)){var a=h(e.metrics,e.frames,n.frame,n.lane),r=a.sheet,i=a.sprite;if(r&&i){var o=(e.source[r.id],e.images[r.id]);if(o.complete!==!1){t.canvas.show();var s=t.canvas[0].width/e.canvasRatio,u=t.canvas[0].height/e.canvasRatio;t.context.globalAlpha=n.alpha,t.context.drawImage(o,i.sampledX,i.sampledY,i.sampledWidth,i.sampledHeight,0,0,s,u)}}}}function p(t){var n=e(t);if(d(t),n.context){var a=0;m(t,n),n.context.clearRect(0,0,t.width,t.height);for(var r=0,i=n.steps;r<i.length;r++){var o=i[r];o.live=Math.max(o.live-o.step,0),o.alpha=Math.max(o.live-.25,0),g(t,n,o),a+=o.alpha+o.d}n.cssBlur&&f(n.canvas,a),l(n.steps),n.steps.length&&c(t)}}var v="blur",w=[];Q(v,{name:v,onLoad:n,onFrameChanged:a})}(),function(){function e(e){return A(e,d)}function t(e,t,n){return e[t]||n}function n(n,a){var r=e(a);r.maxSamples=l(t(a,"easeMaxSamples",5),0),r.damping=l(c(t(a,"easeDamping",.9),.999),0),r.abortTime=l(t(a,"easeAbortTime",250),16),r.updateTime=l(t(a,"easeUpdateTime",a.frameTime),16),r.samples=[],r.steps=[]}function a(e,t){E(t,"dragging")&&(o(t),i(t))}function r(t,n){for(var a,r=e(n),i=r.samples,u=0,l=0,c=0,d=0,f=i;d<f.length;d++){var m=f[d];if(a){var g=m.time-a.time;if(g>r.abortTime)return u=l=c=0,o(n);l+=m.frame-a.frame,u+=m.lane-a.lane,c+=g,a=m}else a=m}i.length=0,c&&(r.lane=n.lane,r.lanes=0,r.laneStep=u/c*r.updateTime,r.frame=n.frame,r.frames=0,r.frameStep=l/c*r.updateTime,s(n))}function i(t){var n=e(t);for(n.samples.push({time:(new Date).getTime(),frame:t.frame,lane:t.lane});n.samples.length>n.maxSamples;)n.samples.shift()}function o(t){var n=e(t);null!=n.handler&&(window.clearTimeout(n.handler),n.handler=null)}function s(t){var n=e(t);n.handler=window.setTimeout(function(){u(t)},n.updateTime)}function u(t){var n=e(t);n.lanes+=n.laneStep,n.frames+=n.frameStep,n.laneStep*=n.damping,n.frameStep*=n.damping;var a=Math.floor(n.frame+n.frames),r=Math.floor(n.lane+n.lanes);N(t,a,r),E(t,"dragging")?o(t):Math.abs(n.frameStep)>.005||Math.abs(n.laneStep)>.005?s(t):o(t)}var l=Math.max,c=Math.min,d="ease";Q(d,{name:d,onLoad:n,mousemove:a,mouseup:r,mouseleave:r,touchmove:a,touchend:r,touchcancel:r})}(),function(){function e(e){return A(e,r)}function t(e,t,n){return e[t]||n}function n(n,a){var r=e(a);r.images=[],r.offsets=[],r.frame=a.frame,r.speed=t(a,"gallerySpeed",500),r.opacity=t(a,"galleryOpacity",.25),r.stage=t(a,"galleryStage",Ye("<div></div>")),r.stage.empty().addClass("gallery-stage").prependTo(a.stage);for(var c=0,d=0,f=a.images;d<f.length;d++){var m=f[d],g=l(m),h=a.height/g.height,p=Ye(m);r.stage.append(p),r.images.push(p),r.offsets.push(-c+(a.width-m.width*h)/2),c+=a.width,p.css({"max-width":"initial",opacity:r.opacity,width:a.width,height:a.height})}var v=s(a),w=a.responsive?o(a):i(a),b=u(a.sizeMode,v,w);r.stage.css(b).css({width:c,left:r.offsets[r.frame]}),r.images[r.frame].animate({opacity:1},{duration:r.speed})}function a(t,n){var a=e(n),r=ue(n),i=E(n,"dragging");a.frame===n.frame||i?(i||a.dX!==r.dX)&&(a.dX=r.dX,a.ddX=r.ddX,a.stage.stop(!0,!0).css({left:a.offsets[a.frame]+a.dX})):(a.stage.stop(!0,!1).animate({left:a.offsets[n.frame]},{duration:a.speed}),a.images[a.frame].animate({opacity:a.opacity},{duration:a.speed}),a.frame=n.frame,a.images[a.frame].animate({opacity:1},{duration:a.speed}),a.stage.animate({left:a.offsets[a.frame]}))}var r="gallery";Q(r,{name:r,onLoad:n,onDraw:a})}(),function(){function e(e){return A(e,a)}function t(t,n){var a=e(n),r=n.metrics[0];if(r){"horizontal"===n.orientation?(a.scale=n.target.innerHeight()/r.sampledHeight,n.frames=r.sampledWidth):(a.scale=n.target.innerWidth()/r.sampledWidth,n.frames=r.sampledHeight);var i=Math.floor(r.sampledWidth*a.scale),o=Math.floor(r.sampledHeight*a.scale);n.stage.css({"background-image":"url("+n.source[r.id]+")","background-repeat":"repeat-both","-webkit-background-size":i+"px "+o+"px","-moz-background-size":i+"px "+o+"px","-o-background-size":i+"px "+o+"px","background-size":i+"px "+o+"px"})}}function n(t,n){var a=e(n),r="horizontal"===n.orientation?1:0,i=r?0:1,o=n.frame%n.frames,s=Math.round(r*o*a.scale),u=Math.round(i*o*a.scale);n.stage.css({"background-position":s+"px "+u+"px"})}var a="panorama";Q(a,{name:a,onLoad:t,onDraw:n})}(),function(){function e(e){return A(e,g)}function a(e,t,n){return t in e?e[t]:n}function r(t,n){var r=e(n);r.source=a(n,"zoomSource",n.source),r.useWheel=a(n,"zoomUseWheel",!1),r.useClick=a(n,"zoomUseClick",!0),r.pinFrame=a(n,"zoomPinFrame",!0),r.doubleClickTime=a(n,"zoomDoubleClickTime",500),r.stage=r.stage||Ye("<div class='zoom-stage'></div>"),r.stage.css({width:"100%",height:"100%",top:0,left:0,bottom:0,right:0,position:"absolute"}).appendTo(n.target).hide()}function i(t,n){var a=e(n);a.stage&&(a.stage.remove(),delete a.stage)}function o(t,a){var r=e(a);if(r.stage.is(":visible")){t.preventDefault(),r.pinFrame&&W(a,"dragging",!1);var i=n(t),o=i.x/a.width,s=i.y/a.height;null==r.oldX&&(r.oldX=o,r.oldY=s),null==r.currentX&&(r.currentX=o,r.currentY=s);var u=o-r.oldX,l=s-r.oldY;r.oldX=o,r.oldY=s,t.type.match(/touch/)&&(u=-u,l=-l),r.currentX=M(r.currentX+u,0,1),r.currentY=M(r.currentY+l,0,1),N(a,a.frame,a.lane)}}function s(t,n){var a=e(n);if(a.useClick){t.preventDefault();var r=(new Date).getTime();if(!a.clickTime)return void(a.clickTime=r);var i=r-a.clickTime;if(i>a.doubleClickTime)return void(a.clickTime=r);a.clickTime=void 0,c(n)&&o(t,n)}}function u(t,n){var a=e(n);a.stage.is(":visible")&&o(t,n)}function l(t,n){var a=e(n),r=n.lane*n.frames+n.frame,i=a.source[r],o=h(n.metrics,n.frames,n.frame,n.lane),s=a.currentX,u=a.currentY;if(null==s&&(s=a.currentX=.5,u=a.currentY=.5),i)s=Math.floor(100*s),u=Math.floor(100*u),a.stage.css({"background-repeat":"no-repeat","background-image":"url('"+i+"')","background-position":s+"% "+u+"%"});else if(o.sheet&&o.sprite){var l=o.sprite,c=o.sheet,d=n.source[c.id],f=-Math.floor(l.sampledX+s*(l.sampledWidth-n.width)),m=-Math.floor(l.sampledY+u*(l.sampledHeight-n.height)),g=c.sampledWidth,p=c.sampledHeight;a.stage.css({"background-image":"url('"+d+"')","background-position":f+"px "+m+"px","background-repeat":"no-repeat","-webkit-background-size":g+"px "+p+"px","-moz-background-size":g+"px "+p+"px","-o-background-size":g+"px "+p+"px","background-size":g+"px "+p+"px"})}}function c(t){var n=e(t);if(!n.stage)throw new Error("zoom module is not initialized or is not available.");return n.stage.is(":visible")?(d(t),!1):(f(t),!0)}function d(t){var n=e(t);n.stage.fadeOut(),t.stage.fadeIn()}function f(t){var n=e(t);n.stage.fadeIn(),t.stage.fadeOut()}function m(t,n){var a=e(n);if(!n.loading&&a.useWheel){var r=t.originalEvent,i=0===r.deltaY?0:r.deltaY>0?1:-1;"number"==typeof a.useWheel&&(i*=a.useWheel),a.stage.is(":visible")&&i>0&&(t.preventDefault(),d(n)),!a.stage.is(":visible")&&0>i&&(t.preventDefault(),f(n))}}var g="zoom";Q(g,{name:g,mousedown:s,touchstart:s,mousemove:u,touchmove:u,wheel:m,onInit:r,onDestroy:i,onDraw:l}),t({toggleZoom:function(){c(this.data)}})}();var $e={$:Ye,bind:T,clamp:M,detectSubsampling:r,error:De,findSpecs:h,getComputedSize:o,getCursorPosition:n,getInnerLayout:u,getInnerSize:s,getOuterSize:i,isFunction:z,log:Ee,measure:c,naturalSize:l,noop:y,pixelRatio:C,preload:w,prevent:S,sourceArray:x,toArray:X,unbind:Y,warn:We,wrap:F};e.Utils=$e,e.sourceArray=x,e.Api=Te,e.extendApi=t,e.instances=Oe,e.applyEvents=ne,e.boot=re,e.create=ie,e.createOrUpdate=oe,e.destroy=se,e.namespace=ze,e.eventNames=Ce,e.callbackNames=Pe,e.eventsToPrevent=Re,e.defaults=Ae,e.getInputState=ue,e.updateInput=le,e.resetInput=ce,e.applyLayout=P,e.getPlaybackState=D,e.updateFrame=N,e.stopAnimation=U,e.applyAnimation=j,e.startAnimation=_,e.registerPlugin=Q,e.registerModule=Z,e.getPlugin=G,e.applyPlugins=J,e.getState=R,e.getPluginState=A,e.is=E,e.flag=W,Object.defineProperty(e,"__esModule",{value:!0})});